<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>谢厂节的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="谢厂节的博客">
<meta property="og:url" content="https://xiexiexin.github.io/index.html">
<meta property="og:site_name" content="谢厂节的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="谢厂节的博客">
  
    <link rel="alternate" href="/atom.xml" title="谢厂节的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">谢厂节的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">技术小栈</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://xiexiexin.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-First-Article" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/06/First-Article/" class="article-date">
  <time datetime="2017-05-06T12:04:04.000Z" itemprop="datePublished">2017-05-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/06/First-Article/">First Article</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xiexiexin.github.io/2017/05/06/First-Article/" data-id="cj2d8n61r00004cm4wv9ungg3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/06/hello-world/" class="article-date">
  <time datetime="2017-05-06T07:11:44.061Z" itemprop="datePublished">2017-05-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/06/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xiexiexin.github.io/2017/05/06/hello-world/" data-id="cj2d8n62400014cm4b87pca89" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-原-Hadoop-学习笔记十-HA高可用设置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/03/原-Hadoop-学习笔记十-HA高可用设置/" class="article-date">
  <time datetime="2017-05-03T08:58:04.000Z" itemprop="datePublished">2017-05-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/03/原-Hadoop-学习笔记十-HA高可用设置/">[原]Hadoop 学习笔记十 HA高可用设置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h2><p>早期的hadoop版本，NN是HDFS集群的单点故障点，每个集群只有一个NN。为了解决 个问题，出现了一堆针对HDFS HA的解决方案，如：Linux HA，VMware FI，shared NAS+NFS，BookKeeper，QJM/Quorum Journal Manager，BackupNode等。</p>
<h3 id="1-SPOF方案"><a href="#1-SPOF方案" class="headerlink" title="1. SPOF方案"></a>1. SPOF方案</h3><ol>
<li>Secondary NameNode，并非HA</li>
<li>Backup NameNode：在内存中复制了NN的当前状态，算是Warm Standby，并没有failover。</li>
<li>手动把name.dir指向NFS，这是安全的Code Standby，可以保证元数据不丢失，但集群的恢复完全靠手动</li>
<li>Facebook AvatarNode</li>
</ol>
<p><img src="http://img.blog.csdn.net/20170504134729937?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"> </p>
<p><em>其设计思想与Hadoop2.0的HA非常相似。</em></p>
<ul>
<li>PrimaryNN与StandbyNN之间通过NFS来共享FsEdits、FsImage文件，这样主备NN之间就拥有了一致的目录树和block信息；而block的位置信息，可以根据DN向两个NN上报的信息过程中构建起来。这样再辅以虚IP，可以较好达到主备NN快速热切的目的。但这里的NFS又引入了新的SPOF</li>
<li>在主备NN共享元数据的过程中，也有方案通过主NN将FsEdits的内容通过与备NN建立的网络IO流，实时写入备NN，并且保证整个过程的原子性。这种方案，解决了NFS共享元数据引入的SPOF，但是主备NN之间的网络连接又会成为新的问题</li>
</ul>
<h3 id="2-hadoop2-X-HA原理"><a href="#2-hadoop2-X-HA原理" class="headerlink" title="2. hadoop2.X HA原理"></a>2. hadoop2.X HA原理</h3><p>Clouera提出了QJM/Qurom Journal Manager，这是基于Paxos算法实现的HDFS HA方案。 </p>
<p><img src="http://img.blog.csdn.net/20170504135015863?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<ul>
<li>基本原理 用2N+1台JN存储EditLog，每次写操作有大多数（&gt;=N+1）返回成功时即认为该次写成功，数据不会丢失了。这个算法能容忍的最多有N台机器挂掉。</li>
<li>HA架构里SecondaryNameNode不存在了，standby NN与Active NN使用JournalNode交互。</li>
<li>发生故障时，Active的NN挂掉，Standby NN会在成为Active NN前，读取所有的JN里的修改日志，这样能高可靠的保证与挂掉的NN的目录镜像树一致，然后无缝的接替它的职责，维护来自客户端请求，从而达到一个高可用的目的</li>
<li>QJM方式来实现HA的主要优势<br>– 不需要配置额外的高共享存储，降低了复杂度和维护成本<br>– 消除spof<br>–系统鲁棒性（Robust：健壮）的程度是可配置<br>–JN不会因为其中一台的延迟而影响整体的延迟，而且不会因为JN的数量增多而影响性能。（NN向JN发送日志是并行的）</li>
<li>客户端fencing：确保只有一个NN能响应客户端请求，让访问standby nn的客户端直接失败。在RPC层封装了一层，通过FailoverProxyProvider以重试的方式连接NN。通过若干次连接一个NN失败后尝试连接新的NN，对客户端的影响是重试的时候增加一定的延迟。客户端可以设置重试次数和时间。</li>
<li>Hadoop提供了ZKFailoverController角色，部署在每个NameNode的节点上，作为一个deamon进程, 简称zkfc<br><img src="http://img.blog.csdn.net/20170504141050434?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></li>
</ul>
<p>ZKFailoverController主要包括三个组件： </p>
<p> – HealthMonitor </p>
<p> – ActiveStatndbyElector：管理和监控自己在ZK中的状态 </p>
<p> – ZKFailoverController：订阅HealthMonitor 和ActiveStandbyElector 的事件，并管理NameNode的状态</p>
<h3 id="3-Hadoop2-x-Federation："><a href="#3-Hadoop2-x-Federation：" class="headerlink" title="3.Hadoop2.x Federation："></a>3.Hadoop2.x Federation：</h3><p>单Active NN的架构使得HDFS在集群扩展性和性能上都有潜在的问题，当集群大到一定程度后，NN进程使用的内存可能会达到上百G，NN成为了性能的瓶颈。 </p>
<p>Hadoop 2.x提供了HDFS Federation： </p>
<p><img src="http://img.blog.csdn.net/20170504141426420?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>Hadoop2中NameNode可以不止一个。一个是active状态，另一个是standby状态，当集群运行时，active状态的NameNode是正常工作的，standby状态的NameNode是待命状态的，时刻同步active状态NameNode的数据。</p>
<p>新HDFS采用一种共享机制，Quorum Journal Node（JournalNode）集群或者Nnetwork File System（NFS）进行共享。NFS是操作系统层面的，JournalNode是Hadoop层面的。主流的作法是使用JournalNode集群进行数据共享。</p>
<p>JournalNode架构图： </p>
<p><img src="http://img.blog.csdn.net/20170503134311615?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>两个NameNode为了数据同步，会通过一组JournalNodes的独立进程进行相互通信。当active状态的NameNode命名空间有任何修改时，会告知大部分的JournalNodes进程。StandBy状态的NameNode有能力读取JNs中的变更信息，并且一直监控edit log的变化，把变化应用于自己的命名空间。standby可以确保在集群出错时，命名空间状态已经完全同步了。</p>
<p>HA确保同一时刻只有一个NameNode处于Active状态，使用ZooKeeper实现这一点。</p>
<h2 id="二、HA集群的搭建"><a href="#二、HA集群的搭建" class="headerlink" title="二、HA集群的搭建"></a>二、HA集群的搭建</h2><h3 id="NameNode的HA"><a href="#NameNode的HA" class="headerlink" title="NameNode的HA"></a>NameNode的HA</h3><p>配置</p>
<ul>
<li>core-site.xml</li>
<li>hdfs-site.xml</li>
</ul>
<h3 id="ResourceManager-HA"><a href="#ResourceManager-HA" class="headerlink" title="ResourceManager HA"></a>ResourceManager HA</h3><p>配置</p>
<ul>
<li>yarn-site.xml</li>
</ul>
<p><strong>测试环境</strong></p>
<table><br><thead><br><tr><br>  <th>主机名</th><br>  <th>IP</th><br>  <th>NameNode</th><br>  <th>DataNode</th><br>  <th>Yarn</th><br>  <th>Zookeeper</th><br>  <th>JournalNode</th><br></tr><br></thead><br><tbody><tr><br>  <td>master1.hadoop</td><br>  <td>192.10.200.2</td><br>  <td>是</td><br>  <td>是</td><br>  <td>否</td><br>  <td>是</td><br>  <td>是</td><br></tr><br><tr><br>  <td>master2.hadoop</td><br>  <td>192.10.200.3</td><br>  <td>是</td><br>  <td>是</td><br>  <td>否</td><br>  <td>是</td><br>  <td>是</td><br></tr><br><tr><br>  <td>slave1.hadoop</td><br>  <td>192.10.200.4</td><br>  <td>是</td><br>  <td>是</td><br>  <td>否</td><br>  <td>是</td><br>  <td>是</td><br></tr><br><tr><br>  <td>slave2.hadoop</td><br>  <td>192.10.200.5</td><br>  <td>否</td><br>  <td>是</td><br>  <td>是</td><br>  <td>是</td><br>  <td>是</td><br></tr><br></tbody></table>

<h3 id="核心配置文件"><a href="#核心配置文件" class="headerlink" title="核心配置文件"></a>核心配置文件</h3><p><strong>core-sites.xml</strong></p>
<pre><code>&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 指定hdfs的nameservice为ns --&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    
      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;fs.defaultFS&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;    
      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;hdfs://ns&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;    
 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!--指定hadoop数据临时存放目录--&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hadoop.tmp.dir&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;/home/hadoop/workspace/hdfs/temp&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;   

 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    
      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;io.file.buffer.size&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;    
      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;4096&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;    
 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!--指定zookeeper地址--&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;ha.zookeeper.quorum&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;slave1.hadoop:2181,slave2.hadoop:2181,master2.hadoop:2181&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;`&lt;/pre&gt;

**hdfs-site.xml**

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!--指定hdfs的nameservice为ns，需要和core-site.xml中的保持一致 --&amp;gt;&lt;/span&gt;    
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.nameservices&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;ns&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- ns下面有两个NameNode，分别是nn1，nn2 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.ha.namenodes.ns&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;nn1,nn2&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- nn1的RPC通信地址 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.namenode.rpc-address.ns.nn1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;master1.hadoop:9000&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- nn1的http通信地址 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.namenode.http-address.ns.nn1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;slave1.hadoop:50070&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- nn2的RPC通信地址 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.namenode.rpc-address.ns.nn2&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;slave2.hadoop:9000&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- nn2的http通信地址 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.namenode.http-address.ns.nn2&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;master2.hadoop:50070&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 指定NameNode的元数据在JournalNode上的存放位置 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.namenode.shared.edits.dir&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;qjournal://master1.hadoop:8485;master2.hadoop:8485/ns&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 指定JournalNode在本地磁盘存放数据的位置 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.journalnode.edits.dir&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;/home/hadoop/workspace/journal&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 开启NameNode故障时自动切换 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.ha.automatic-failover.enabled&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 配置失败自动切换实现方式 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.client.failover.proxy.provider.ns&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 配置隔离机制 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
             &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.ha.fencing.methods&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
             &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;sshfence&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 使用隔离机制时需要ssh免登陆 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.ha.fencing.ssh.private-key-files&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;/home/hadoop/.ssh/id_rsa&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.namenode.name.dir&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;    
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;file:///home/hadoop/workspace/hdfs/name&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;    
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    

    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.datanode.data.dir&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;    
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;file:///home/hadoop/workspace/hdfs/data&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;    
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    

    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    
       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.replication&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;    
       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;2&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;    
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;   
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 在NN和DN上开启WebHDFS (REST API)功能,不是必须 --&amp;gt;&lt;/span&gt;                                                                    
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    
       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.webhdfs.enabled&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;    
       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;    
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;`&lt;/pre&gt;

**mapred-site.xml**

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce.framework.name&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;    
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;    
 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;`&lt;/pre&gt;

**yarn-site.xml**

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 指定nodemanager启动时加载server的方式为shuffle server --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;    
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.nodemanager.aux-services&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;    
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce_shuffle&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;    
     &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  
     &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 指定resourcemanager地址 --&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.hostname&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;slave1.hadoop&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt; 
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;`&lt;/pre&gt;

**查看master1 slaves**

&lt;pre class=&quot;prettyprint&quot;&gt;`/home/hadoop/hadoop-&lt;span class=&quot;hljs-number&quot;&gt;2.7&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;.3&lt;/span&gt;/etc/hadoop
&lt;span class=&quot;hljs-built_in&quot;&gt;cat&lt;/span&gt; slaves`&lt;/pre&gt;

**启动zookeeper集群** 

在slave1 slave2 master2执行

&lt;pre class=&quot;prettyprint&quot;&gt;`/opt/zookeeper-3.5.2-alpha/bin/zkServer.sh &lt;span class=&quot;hljs-operator&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;start&lt;/span&gt;&lt;/span&gt;`&lt;/pre&gt;

**启动journalnode集群 **

&lt;pre class=&quot;prettyprint&quot;&gt;`sbin/hadoop-damons.sh &lt;span class=&quot;hljs-operator&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;start&lt;/span&gt; journalnode&lt;/span&gt;`&lt;/pre&gt;

**格式化zkfc**

&lt;pre class=&quot;prettyprint&quot;&gt;`hdfs zkfc &lt;span class=&quot;hljs-attribute&quot;&gt;-formatZK&lt;/span&gt;
zkCli&lt;span class=&quot;hljs-built_in&quot;&gt;.&lt;/span&gt;sh &lt;span class=&quot;hljs-attribute&quot;&gt;-server&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;127.0&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;.1&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;2181&lt;/span&gt;
ls /hadoop&lt;span class=&quot;hljs-attribute&quot;&gt;-ha&lt;/span&gt;`&lt;/pre&gt;

会输出[ns] 

**格式化hdfs**

&lt;pre class=&quot;prettyprint&quot;&gt;`hadoop namenode -&lt;span class=&quot;hljs-built_in&quot;&gt;format&lt;/span&gt;`&lt;/pre&gt;

**在master1启动namenode**

&lt;pre class=&quot;prettyprint&quot;&gt;`./hadoop-daemon.sh &lt;span class=&quot;hljs-operator&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;start&lt;/span&gt; namenode&lt;/span&gt;`&lt;/pre&gt;

**在master2同步namenode数据，同时启动standby的namenode**

&lt;pre class=&quot;prettyprint&quot;&gt;`hdfs namenode &lt;span class=&quot;hljs-attribute&quot;&gt;-bootstrapStandby&lt;/span&gt;
&lt;span class=&quot;hljs-built_in&quot;&gt;.&lt;/span&gt;/hadoop&lt;span class=&quot;hljs-attribute&quot;&gt;-daemon&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;.&lt;/span&gt;sh start namenode`&lt;/pre&gt;

**在master1上启动datanode**

&lt;pre class=&quot;prettyprint&quot;&gt;`./hadoop-daemon.sh &lt;span class=&quot;hljs-operator&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;start&lt;/span&gt; datanode&lt;/span&gt;`&lt;/pre&gt;

**启动yarn，在slave2运行**

&lt;pre class=&quot;prettyprint&quot;&gt;`./&lt;span class=&quot;hljs-operator&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;start&lt;/span&gt;-yarn.sh&lt;/span&gt;`&lt;/pre&gt;

**查看rm状态**

&lt;pre class=&quot;prettyprint&quot;&gt;`yarn rmadmin &lt;span class=&quot;hljs-attribute&quot;&gt;-getServiceState&lt;/span&gt; rm1
active
yarn rmadmin &lt;span class=&quot;hljs-attribute&quot;&gt;-getServiceState&lt;/span&gt; rm2
standby`&lt;/pre&gt;

**切换NN**

&lt;pre class=&quot;prettyprint&quot;&gt;`hdfs haadmin &lt;span class=&quot;hljs-attribute&quot;&gt;-DFSHAadmin&lt;/span&gt; &lt;span class=&quot;hljs-attribute&quot;&gt;-transitionToActive&lt;/span&gt; master&lt;span class=&quot;hljs-built_in&quot;&gt;.&lt;/span&gt;hadoop`&lt;/pre&gt;

**让rm2 active**

&lt;pre class=&quot;prettyprint&quot;&gt;`hdfs haadmin -DFSHAadmin -failover  master&lt;span class=&quot;hljs-preprocessor&quot;&gt;.hadoop&lt;/span&gt; slave3&lt;span class=&quot;hljs-preprocessor&quot;&gt;.hadoop&lt;/span&gt;`&lt;/pre&gt;

**启动zkfc，在master1运行**

&lt;pre class=&quot;prettyprint&quot;&gt;`sbin/hadoop-daemons.sh &lt;span class=&quot;hljs-operator&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;start&lt;/span&gt; zkfc&lt;/span&gt;
</code></pre><p>参考文章： </p>
<p><a href="http://www.cnblogs.com/tgzhu/p/5790565.html" target="_blank" rel="external">http://www.cnblogs.com/tgzhu/p/5790565.html</a> </p>
<p><a href="http://www.open-open.com/lib/view/open1436855630959.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1436855630959.html</a></p>
<pre><code>&lt;div&gt;
    作者：xundh 发表于2017/5/3 16:58:04 [原文链接](http://blog.csdn.net/xundh/article/details/71126098)
&lt;/div&gt;
&lt;div&gt;
阅读：39 评论：0 [查看评论](http://blog.csdn.net/xundh/article/details/71126098#comments)
&lt;/div&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xiexiexin.github.io/2017/05/03/原-Hadoop-学习笔记十-HA高可用设置/" data-id="cj2d8n63j00094cm4kqd9kygc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-原-Hadoop-学习笔记九-任务远程提交-Java远程提交" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/03/原-Hadoop-学习笔记九-任务远程提交-Java远程提交/" class="article-date">
  <time datetime="2017-05-03T00:30:02.000Z" itemprop="datePublished">2017-05-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/03/原-Hadoop-学习笔记九-任务远程提交-Java远程提交/">[原]Hadoop 学习笔记九 任务远程提交--Java远程提交</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Hadoop运行计算任务，大概有以下几种方式</strong></p>
<ol>
<li>把MapReduce任务打包到jar里，上传到服务器，用命令行启动</li>
<li>通过Java向Hadoop集群提交MapReduce任务</li>
<li>服务器的hadoop配置拷到本地，设置hosts指向namenode和resourcemanager，本地执行hadoop jar</li>
<li>任务做成schedule，定时调用shell脚本运行java任务</li>
<li>Eclipse的hadoop插件</li>
</ol>
<p>本文介绍第2种方式</p>
<pre><code>&lt;div&gt;
    作者：xundh 发表于2017/5/3 8:30:02 [原文链接](http://blog.csdn.net/xundh/article/details/71106503)
&lt;/div&gt;
&lt;div&gt;
阅读：47 评论：0 [查看评论](http://blog.csdn.net/xundh/article/details/71106503#comments)
&lt;/div&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xiexiexin.github.io/2017/05/03/原-Hadoop-学习笔记九-任务远程提交-Java远程提交/" data-id="cj2d8n62c00024cm4595t1mp8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-原-Hadoop-学习笔记八-任务远程提交-Eclipse插件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/02/原-Hadoop-学习笔记八-任务远程提交-Eclipse插件/" class="article-date">
  <time datetime="2017-05-02T02:42:57.000Z" itemprop="datePublished">2017-05-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/02/原-Hadoop-学习笔记八-任务远程提交-Eclipse插件/">[原]Hadoop 学习笔记八 任务远程提交--Eclipse插件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Hadoop运行计算任务，大概有以下几种方式</strong></p>
<ol>
<li>把MapReduce任务打包到jar里，上传到服务器，用命令行启动</li>
<li>通过Java向Hadoop集群提交MapReduce任务</li>
<li>服务器的hadoop配置拷到本地，设置hosts指向namenode和resourcemanager，本地执行hadoop jar</li>
<li>任务做成schedule，定时调用shell脚本运行java任务</li>
<li>Eclipse的hadoop插件</li>
</ol>
<p>本文介绍第5种方式</p>
<h2 id="Eclipse下搭建hadoop2-7-3开发环境"><a href="#Eclipse下搭建hadoop2-7-3开发环境" class="headerlink" title="Eclipse下搭建hadoop2.7.3开发环境"></a>Eclipse下搭建hadoop2.7.3开发环境</h2><ol>
<li>下载并编译haddop-eclipse-plugin-2.7.3.jar</li>
<li>把hadoop-eclipse-plugin-2.7.3.jar放到myeclipse的安装目录下的plugins目录下，重启myeclipse</li>
<li>下载haddop2.7.3，并解压到c:\tools\hadoop-2.7.3</li>
<li>设置hosts将master.hadoop指向hadoop集群</li>
<li>设置Eclipes Hadoop位置</li>
</ol>
<p><img src="http://img.blog.csdn.net/20170502090900550?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20170502090958890?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h4 id="新建hadoop配置"><a href="#新建hadoop配置" class="headerlink" title="新建hadoop配置"></a>新建hadoop配置</h4><p><img src="http://img.blog.csdn.net/20170502104233658?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h5 id="参数说明："><a href="#参数说明：" class="headerlink" title="参数说明："></a>参数说明：</h5><p><strong>Map/Reduce(V2)Master </strong> </p>
<ul>
<li><p>Host hadoop主机地址 </p>
</li>
<li><p>Port 对应mapred-site.xml下的jobtracher地址</p>
<p> <span class="hljs-tag">&lt;<span class="hljs-title">property</span>&gt;</span></p>
<pre><code>&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce.jobtracher.http.address&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;master.hadoop:50020&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
</code></pre><p> <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>`</p>
<p> <strong>DFS Master</strong> </p>
<ul>
<li><p>Port 对应core-site.xml下的fs.default.name端口</p>
<pre class="prettyprint">`<span class="hljs-tag">&lt;<span class="hljs-title">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>fs.defaultFS<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>hdfs://master.hadoop:9000<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>`</pre>

</li>
</ul>
</li>
</ul>
<ul>
<li>User name：填写windows的用户名    <strong>Advanced Parameters</strong></li>
<li><p>hadoop.tmp.dir 设置为core-site.xml下hadoop.tmp.dir参数</p>
<p>另外，修改hdfs-site.xml下的dfs.permission参数，允许连接</p>
<pre class="prettyprint">`<span class="hljs-tag">&lt;<span class="hljs-title">property</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>dfs.permissions<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>`</pre>

<p><strong>还要在hadoop新建目录</strong></p>
<pre class="prettyprint">`hdfs dfs <span class="hljs-attribute">-mkdir</span> <span class="hljs-attribute">-p</span> /user/hadoop/input
hdfs dfs <span class="hljs-attribute">-mkdir</span> <span class="hljs-attribute">-p</span> /user/hadoop/output`</pre>

<p>保存配置参数，并重启MyEclipse，可以看见如下的文件结构，配置成功。 </p>
<p><img src="http://img.blog.csdn.net/20170502154358670?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>（测试时遇到下面问题，未能解决，以后有时间再来处理，可以先不管它） </p>
<p><img src="http://img.blog.csdn.net/20170502150548947?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>**拷贝hadoop.dll和winutils </p>
<p>下载hadoop.dll和winutils.exe到windows的hadoop/bin下 </p>
<p>并把hadoop.dll添加到windows-&gt;system32</p>
<p><strong>新建环境变量</strong> </p>
<p><img src="http://img.blog.csdn.net/20170502161724340?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20170502161751388?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="新建项目测试"><a href="#新建项目测试" class="headerlink" title="新建项目测试"></a>新建项目测试</h2><p><strong>Hadoop建立测试文件</strong></p>
<pre class="prettyprint">`vi test.<span class="hljs-keyword">text</span>`</pre>

<pre class="prettyprint">`hello
world
who
are
you
thank you.
You are welcome.`</pre>

<pre class="prettyprint">`hdfs dfs <span class="hljs-attribute">-mkdir</span> <span class="hljs-attribute">-p</span> /user/hadoop/input
hdfs dfs <span class="hljs-attribute">-put</span> test<span class="hljs-built_in">.</span>txt /user/hadoop/input
hdfs dfs <span class="hljs-attribute">-chmod</span> <span class="hljs-number">777</span> /user/hadoop<span class="hljs-subst">/</span>`</pre>

<p><strong>新建 MapReduce项目</strong></p>
<p><strong>新建文件</strong> </p>
<p><img src="http://img.blog.csdn.net/20170502163859276?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"> </p>
<p><em>log4j.properties</em></p>
<pre class="prettyprint">`log4j<span class="hljs-preprocessor">.rootLogger</span>=DEBUG,stdout,R

log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.stdout</span>=org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.log</span>4j<span class="hljs-preprocessor">.ConsoleAppender</span> 
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.stdout</span><span class="hljs-preprocessor">.layout</span>=org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.log</span>4j<span class="hljs-preprocessor">.PatternLayout</span> 
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.stdout</span><span class="hljs-preprocessor">.layout</span><span class="hljs-preprocessor">.ConversionPattern</span>=%<span class="hljs-number">5</span>p - %m%n

log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.R</span>=org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.log</span>4j<span class="hljs-preprocessor">.RollingFileAppender</span> 
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.R</span><span class="hljs-preprocessor">.File</span>=mapreduce_test<span class="hljs-preprocessor">.log</span> 
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.R</span><span class="hljs-preprocessor">.MaxFileSize</span>=<span class="hljs-number">1</span>MB 
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.R</span><span class="hljs-preprocessor">.MaxBackupIndex</span>=<span class="hljs-number">1</span> 
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.R</span><span class="hljs-preprocessor">.layout</span>=org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.log</span>4j<span class="hljs-preprocessor">.PatternLayout</span> 
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.R</span><span class="hljs-preprocessor">.layout</span><span class="hljs-preprocessor">.ConversionPattern</span>=%p %t %c - %m%n 
log4j<span class="hljs-preprocessor">.logger</span><span class="hljs-preprocessor">.com</span><span class="hljs-preprocessor">.codefutures</span>=INFO `</pre>

<p><em>WordCount.java</em></p>
<pre class="prettyprint">`package <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.test</span><span class="hljs-preprocessor">.hadoop</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.io</span><span class="hljs-preprocessor">.IOException</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.StringTokenizer</span><span class="hljs-comment">;</span>

import org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.hadoop</span><span class="hljs-preprocessor">.conf</span><span class="hljs-preprocessor">.Configuration</span><span class="hljs-comment">;</span>
import org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.hadoop</span><span class="hljs-preprocessor">.fs</span><span class="hljs-preprocessor">.Path</span><span class="hljs-comment">;</span>
import org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.hadoop</span><span class="hljs-preprocessor">.io</span><span class="hljs-preprocessor">.IntWritable</span><span class="hljs-comment">;</span>
import org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.hadoop</span><span class="hljs-preprocessor">.io</span><span class="hljs-preprocessor">.Text</span><span class="hljs-comment">;</span>
import org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.hadoop</span><span class="hljs-preprocessor">.mapreduce</span><span class="hljs-preprocessor">.Job</span><span class="hljs-comment">;</span>
import org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.hadoop</span><span class="hljs-preprocessor">.mapreduce</span><span class="hljs-preprocessor">.Mapper</span><span class="hljs-comment">;</span>
import org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.hadoop</span><span class="hljs-preprocessor">.mapreduce</span><span class="hljs-preprocessor">.Reducer</span><span class="hljs-comment">;</span>
import org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.hadoop</span><span class="hljs-preprocessor">.mapreduce</span><span class="hljs-preprocessor">.lib</span><span class="hljs-preprocessor">.input</span><span class="hljs-preprocessor">.FileInputFormat</span><span class="hljs-comment">;</span>
import org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.hadoop</span><span class="hljs-preprocessor">.mapreduce</span><span class="hljs-preprocessor">.lib</span><span class="hljs-preprocessor">.output</span><span class="hljs-preprocessor">.FileOutputFormat</span><span class="hljs-comment">;</span>
import org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.hadoop</span><span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.GenericOptionsParser</span><span class="hljs-comment">;</span>

public class WordCount {

    public static class TokenizerMapper extends
            Mapper&lt;Object, Text, Text, IntWritable&gt; {

        private final static IntWritable one = new IntWritable(<span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
        private Text word = new Text()<span class="hljs-comment">;</span>

        public void map(Object key, Text value, Context context)
                throws IOException, InterruptedException {
            StringTokenizer itr = new StringTokenizer(value<span class="hljs-preprocessor">.toString</span>())<span class="hljs-comment">;</span>
            while (itr<span class="hljs-preprocessor">.hasMoreTokens</span>()) {
                word<span class="hljs-preprocessor">.set</span>(itr<span class="hljs-preprocessor">.nextToken</span>())<span class="hljs-comment">;</span>
                context<span class="hljs-preprocessor">.write</span>(word, one)<span class="hljs-comment">;</span>
            }
        }
    }

    public static class IntSumReducer extends
            Reducer&lt;Text, IntWritable, Text, IntWritable&gt; {
        private IntWritable result = new IntWritable()<span class="hljs-comment">;</span>

        public void reduce(Text key, Iterable&lt;IntWritable&gt; values,
                Context context) throws IOException, InterruptedException {
            int sum = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
            for (IntWritable val : values) {
                sum += val<span class="hljs-preprocessor">.get</span>()<span class="hljs-comment">;</span>
            }
            result<span class="hljs-preprocessor">.set</span>(sum)<span class="hljs-comment">;</span>
            context<span class="hljs-preprocessor">.write</span>(key, result)<span class="hljs-comment">;</span>
        }
    }

    public static void main(String[] args) throws Exception {
        //System<span class="hljs-preprocessor">.setProperty</span>(<span class="hljs-string">"hadoop.home.dir"</span>, <span class="hljs-string">"C:\\tools\\hadoop-2.7.3"</span>)<span class="hljs-comment">;  加这一句则可以不要设置环境变量</span>
        Configuration conf = new Configuration()<span class="hljs-comment">;</span>

        String[] otherArgs = new GenericOptionsParser(conf, args)
                <span class="hljs-preprocessor">.getRemainingArgs</span>()<span class="hljs-comment">;</span>
        if (otherArgs<span class="hljs-preprocessor">.length</span> != <span class="hljs-number">2</span>) {
            System<span class="hljs-preprocessor">.err</span><span class="hljs-preprocessor">.println</span>(otherArgs<span class="hljs-preprocessor">.length</span>)<span class="hljs-comment">;</span>
            System<span class="hljs-preprocessor">.err</span><span class="hljs-preprocessor">.println</span>(<span class="hljs-string">"Usage: wordcount &lt;in&gt; &lt;out&gt;"</span>)<span class="hljs-comment">;</span>
            System<span class="hljs-preprocessor">.exit</span>(<span class="hljs-number">2</span>)<span class="hljs-comment">;</span>
        }
        Job job = new Job(conf, <span class="hljs-string">"word count"</span>)<span class="hljs-comment">;</span>
        job<span class="hljs-preprocessor">.setJarByClass</span>(WordCount<span class="hljs-preprocessor">.class</span>)<span class="hljs-comment">;</span>
        job<span class="hljs-preprocessor">.setMapperClass</span>(TokenizerMapper<span class="hljs-preprocessor">.class</span>)<span class="hljs-comment">;</span>
        job<span class="hljs-preprocessor">.setCombinerClass</span>(IntSumReducer<span class="hljs-preprocessor">.class</span>)<span class="hljs-comment">;</span>
        job<span class="hljs-preprocessor">.setReducerClass</span>(IntSumReducer<span class="hljs-preprocessor">.class</span>)<span class="hljs-comment">;</span>
        job<span class="hljs-preprocessor">.setOutputKeyClass</span>(Text<span class="hljs-preprocessor">.class</span>)<span class="hljs-comment">;</span>
        job<span class="hljs-preprocessor">.setOutputValueClass</span>(IntWritable<span class="hljs-preprocessor">.class</span>)<span class="hljs-comment">;</span>
        FileInputFormat<span class="hljs-preprocessor">.addInputPath</span>(job, new Path(otherArgs[<span class="hljs-number">0</span>]))<span class="hljs-comment">;</span>
        FileOutputFormat<span class="hljs-preprocessor">.setOutputPath</span>(job, new Path(otherArgs[<span class="hljs-number">1</span>]))<span class="hljs-comment">;</span>
        System<span class="hljs-preprocessor">.exit</span>(job<span class="hljs-preprocessor">.waitForCompletion</span>(true) ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
    }
}`</pre>

<p><strong>Run configuration</strong> </p>
<p><img src="http://img.blog.csdn.net/20170502155331440?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong>运行</strong> </p>
<p>右击testMapReduce项目，Run As-run on hadoop </p>
<p><img src="http://img.blog.csdn.net/20170502155722109?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong>查看结果</strong> </p>
<p><img src="http://img.blog.csdn.net/20170502163621303?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>然而在 <a href="http://master.hadoop:8088/cluster/apps" target="_blank" rel="external">http://master.hadoop:8088/cluster/apps</a>  </p>
<p>中并未发现提交的任务。 </p>
<p><strong>拷贝配置文件</strong></p>
<p><img src="http://img.blog.csdn.net/20170503084145116?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"> </p>
<p>从集群中拷贝 core-site.xml , hdfs-sie.xml , mapred-site.xml , yarn-site.xml到项目中。修改main函数：</p>
<pre class="prettyprint">`    Configuration conf = new Configuration()<span class="hljs-comment">;</span>

    conf<span class="hljs-preprocessor">.addResource</span>(<span class="hljs-string">"core-site.xml"</span>)<span class="hljs-comment">;</span>
    conf<span class="hljs-preprocessor">.addResource</span>(<span class="hljs-string">"hdfs-site.xml"</span>)<span class="hljs-comment">;</span>
    conf<span class="hljs-preprocessor">.addResource</span>(<span class="hljs-string">"mapred-site.xml"</span>)<span class="hljs-comment">;</span>
    conf<span class="hljs-preprocessor">.addResource</span>(<span class="hljs-string">"yarn-site.xml"</span>)<span class="hljs-comment">;</span>`</pre>

<p>再运行，遇到下面错误 </p>
<p><img src="http://img.blog.csdn.net/20170503084118022?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>参照 </p>
<p><a href="http://blog.csdn.net/xundh/article/details/46572183#t7" target="_blank" rel="external">http://blog.csdn.net/xundh/article/details/46572183#t7</a> </p>
<p>这里解决。</p>
<p>可以在All Applications看到任务运行情况。 </p>
<p><img src="http://img.blog.csdn.net/20170503095550293?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"> </p>
<p>运行失败，报异常信息： </p>
<p>Exception message: /bin/bash: 第 0 行:fg: 无任务控制 </p>
<p><img src="http://img.blog.csdn.net/20170503095943935?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>处理方法 </p>
<p>在项目的core-site.xml添加：</p>
<pre class="prettyprint">`<span class="hljs-tag">&lt;<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>mapreduce.app-submission.cross-platform<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>`</pre>

<p>或main函数写：</p>
<p><pre class="prettyprint">`conf.<span class="hljs-operator"><span class="hljs-keyword">set</span>(<span class="hljs-string">“mapreduce.app-submission.cross-platform”</span>, <span class="hljs-string">“true”</span>);</span></pre></p>
<pre><code>&lt;div&gt;
    作者：xundh 发表于2017/5/2 10:42:57 [原文链接](http://blog.csdn.net/xundh/article/details/71078365)
&lt;/div&gt;
&lt;div&gt;
阅读：75 评论：0 [查看评论](http://blog.csdn.net/xundh/article/details/71078365#comments)
&lt;/div&gt;
</code></pre></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xiexiexin.github.io/2017/05/02/原-Hadoop-学习笔记八-任务远程提交-Eclipse插件/" data-id="cj2d8n63e00084cm4yau8resy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-原-Ionic-自动生成启动图标" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/28/原-Ionic-自动生成启动图标/" class="article-date">
  <time datetime="2017-04-28T13:50:22.000Z" itemprop="datePublished">2017-04-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/28/原-Ionic-自动生成启动图标/">[原]Ionic 自动生成启动图标</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>在项目的根目录下创建resources文件夹。</li>
<li>在文件夹中都放入icon.png（应用图标，最小192x192px，不带圆角），splash.png（启动屏幕，最小2208x2208px，中间区域1200x1200px）(可以是png、psd、ai)</li>
<li><p>在cmd中进入项目所在文件夹执行：</p>
<p>ionic resources  `</p>
<p>执行该命令后，会自动在resources文件夹下创建已添加的平台名称的文件夹，如：android，其中会自动将图片进行缩放、裁剪，生成不同分辨率的图片，并在config.xml中添加相应内容。 </p>
<pre><code>也可分开执行：
</code></pre><p><pre class="prettyprint">`<span class="hljs-comment">ionic</span> <span class="hljs-comment">resources</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">icon</span><br><span class="hljs-comment">ionic</span> <span class="hljs-comment">resources</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">splash</span>  </pre></p>
<pre><code>&lt;div&gt;
    作者：xundh 发表于2017/4/28 21:50:22 [原文链接](http://blog.csdn.net/xundh/article/details/70941451)
&lt;/div&gt;
&lt;div&gt;
阅读：30 评论：0 [查看评论](http://blog.csdn.net/xundh/article/details/70941451#comments)
&lt;/div&gt;
</code></pre></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xiexiexin.github.io/2017/04/28/原-Ionic-自动生成启动图标/" data-id="cj2d8n642000d4cm40409c3dd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-原-Linux-基础学习-用户及文件权限管理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/27/原-Linux-基础学习-用户及文件权限管理/" class="article-date">
  <time datetime="2017-04-27T13:52:36.000Z" itemprop="datePublished">2017-04-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/27/原-Linux-基础学习-用户及文件权限管理/">[原]Linux 基础学习 用户及文件权限管理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Linux用户管理"><a href="#Linux用户管理" class="headerlink" title="Linux用户管理"></a>Linux用户管理</h2><hr>
<p>Linux可以实现多用户登陆的操作系统，共享一些主机的资源、分别有自己的用户空间，用于存放各自的文件。但实际上他们的文件都是放在同一个物理磁盘上的甚至同一个逻辑分区或者目录里。但由于 Linux 的用户管理和权限机制，不同用户不可以轻易地查看、修改彼此的文件 。</p>
<h3 id="查看用户"><a href="#查看用户" class="headerlink" title="查看用户"></a>查看用户</h3><pre><code>who am &lt;span class=&quot;hljs-built_in&quot;&gt;i&lt;/span&gt;
或
who mom likes

whoami`&lt;/pre&gt;

输出结果说明 

![这里写图片描述](http://img.blog.csdn.net/20170427213141547?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

pts/0 中 pts表示伪终端。所谓伪是相对于 /dev/tty 设备而言的。 

真终端是使用[Ctrl]+[Alt]+[F1]~[F7]进行切换的设备。 

伪终端就是在图形用户界面使用 /dev/tty7 是每打开一个终端就会产生一个伪终端。

**who命令其它参数**

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
  &lt;th&gt;参数&lt;/th&gt;
  &lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
  &lt;td&gt;-a&lt;/td&gt;
  &lt;td&gt;打印能打印的全部&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;-d&lt;/td&gt;
  &lt;td&gt;打印死掉的进程&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;-m&lt;/td&gt;
  &lt;td&gt;同am i,mom likes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;-q&lt;/td&gt;
  &lt;td&gt;打印当前登录用户数及用户名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;-u&lt;/td&gt;
  &lt;td&gt;打印当前登录用户登录信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;-r&lt;/td&gt;
  &lt;td&gt;打印运行等级&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

### 创建用户
</code></pre><ul>
<li>su      切换用户到user</li>
<li>sudo   以特权级别运行cmd命令</li>
<li>sudo adduser lilei  新增用户</li>
<li><p>ls /home*   su -l lilei     切换用户到 lilei</p>
<h2 id="用户组"><a href="#用户组" class="headerlink" title="用户组"></a>用户组</h2><h3 id="查看自己是哪个组"><a href="#查看自己是哪个组" class="headerlink" title="查看自己是哪个组"></a>查看自己是哪个组</h3><pre class="prettyprint">`groups shiyanlou`</pre>

<p><img src="http://img.blog.csdn.net/20170427214305295?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>查看 /etc/group文件</p>
<pre class="prettyprint">`cat /etc/<span class="hljs-keyword">group</span> | <span class="hljs-keyword">sort</span>
cat /etc/<span class="hljs-keyword">group</span> | grep -E <span class="hljs-string">"shiyanlou"</span>`</pre>

<p>结果格式</p>
<pre class="prettyprint">`<span class="hljs-tag">group_name</span><span class="hljs-pseudo">:password</span><span class="hljs-pseudo">:GID</span><span class="hljs-pseudo">:user_list</span>`</pre>

<p>将其它用户加入sudo用户组</p>
<pre class="prettyprint">`su <span class="hljs-operator">-l</span> lilei
<span class="hljs-built_in">sudo</span> ls
su shiyanlou
groups lilei
<span class="hljs-built_in">sudo</span> usermod -G <span class="hljs-built_in">sudo</span> lilei
groups lilei`</pre>

<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><pre class="prettyprint">`<span class="hljs-built_in">sudo</span> deluser lilei --remove-home`</pre>

<h2 id="Linux-文件权限"><a href="#Linux-文件权限" class="headerlink" title="Linux 文件权限"></a>Linux 文件权限</h2><pre class="prettyprint">`ls <span class="hljs-operator">-l</span>`</pre>

<p><img src="http://img.blog.csdn.net/20170427214927319?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="变更文件所有者"><a href="#变更文件所有者" class="headerlink" title="变更文件所有者"></a>变更文件所有者</h3><p><pre class="prettyprint">`<span class="hljs-built_in">cd</span> /home/lilei<br>ls fff<br><span class="hljs-built_in">sudo</span> chown shiyanlou fff<br>cp fff /home/shiyanlou</pre></p>
</li>
</ul>
<p><strong>adduser 和 useradd 的区别是什么？</strong></p>
<p>答：useradd 只创建用户，创建完了用 passwd lilei 去设置新用户的密码。adduser 会创建用户，创建目录，创建密码（提示你设置），做这一系列的操作。其实 useradd、userdel 这类操作更像是一种命令，执行完了就返回。而 adduser 更像是一种程序，需要你输入、确定等一系列操作。</p>
<pre><code>&lt;div&gt;
    作者：xundh 发表于2017/4/27 21:52:36 [原文链接](http://blog.csdn.net/xundh/article/details/70880260)
&lt;/div&gt;
&lt;div&gt;
阅读：24 评论：0 [查看评论](http://blog.csdn.net/xundh/article/details/70880260#comments)
&lt;/div&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xiexiexin.github.io/2017/04/27/原-Linux-基础学习-用户及文件权限管理/" data-id="cj2d8n64a000f4cm46pz9urp0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-原-运维基础——Zabbix-添加web页面url状态监控" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/27/原-运维基础——Zabbix-添加web页面url状态监控/" class="article-date">
  <time datetime="2017-04-27T04:34:54.000Z" itemprop="datePublished">2017-04-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/27/原-运维基础——Zabbix-添加web页面url状态监控/">[原]运维基础——Zabbix 添加web页面url状态监控</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Web页面URL监控"><a href="#Web页面URL监控" class="headerlink" title="Web页面URL监控"></a>Web页面URL监控</h2><p><strong>点“组态”（配置）</strong> </p>
<p><img src="http://img.blog.csdn.net/20170427122937521?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong>选择要设置的主机</strong> </p>
<p><img src="http://img.blog.csdn.net/20170427122944677?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong>点击应用集</strong> </p>
<p><img src="http://img.blog.csdn.net/20170427122950476?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"> </p>
<p><strong>创建应用集</strong> </p>
<p><img src="http://img.blog.csdn.net/20170427122957101?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong>填写应用集名称</strong> </p>
<p><img src="http://img.blog.csdn.net/20170427123003211?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong>创建场景</strong> </p>
<p><img src="http://img.blog.csdn.net/20170427123009258?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20170427123014662?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong>在步骤里添加网址</strong> </p>
<p><img src="http://img.blog.csdn.net/20170427123021287?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong>启动</strong> </p>
<p><img src="http://img.blog.csdn.net/20170427123434983?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="创建触发器"><a href="#创建触发器" class="headerlink" title="创建触发器"></a>创建触发器</h3><p><img src="http://img.blog.csdn.net/20170427123027367?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20170427123032743?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong>点击表达式后的添加，然后点项目后的选择</strong> </p>
<p><img src="http://img.blog.csdn.net/20170427123736354?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20170427123956005?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<pre><code>&lt;div&gt;
    作者：xundh 发表于2017/4/27 12:34:54 [原文链接](http://blog.csdn.net/xundh/article/details/70849320)
&lt;/div&gt;
&lt;div&gt;
阅读：58 评论：0 [查看评论](http://blog.csdn.net/xundh/article/details/70849320#comments)
&lt;/div&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xiexiexin.github.io/2017/04/27/原-运维基础——Zabbix-添加web页面url状态监控/" data-id="cj2d8n64y000k4cm4t2evxiuj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-原-ASP-NET-MVC-Razor语法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/26/原-ASP-NET-MVC-Razor语法/" class="article-date">
  <time datetime="2017-04-26T14:19:29.000Z" itemprop="datePublished">2017-04-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/26/原-ASP-NET-MVC-Razor语法/">[原]ASP.NET MVC Razor语法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="使用-字符将代码添加到页面中，相当于-lt-gt"><a href="#使用-字符将代码添加到页面中，相当于-lt-gt" class="headerlink" title="使用 @ 字符将代码添加到页面中，相当于&lt;%= %&gt;"></a>使用 @ 字符将代码添加到页面中，相当于&lt;%= %&gt;</h3><pre><code>&lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 单语句块，声明两个变量--&amp;gt;&lt;/span&gt;
@{int num = 10;}
@{string str = &quot;hello cnblogs&quot;;}

&lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 内嵌代码块--&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;刚才声明的整形的值为： @num&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;刚才声明的字符型的值为： @str&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 多行代码块 --&amp;gt;&lt;/span&gt;
@{
    string strHello = &quot;Hello World&quot;;
    string now = DateTime.Now.ToString();
    string sayHello = strHello + &quot;当前时间为：&quot; + now;
}
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;问好: @sayHello&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;`&lt;/pre&gt;

### 输出html标记

&lt;pre class=&quot;prettyprint&quot;&gt;`string sayHello=&quot;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;Hello world&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;&quot;;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;@Html.Raw(sayHello)&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;`&lt;/pre&gt;

### 代码和标记混合

&lt;pre class=&quot;prettyprint&quot;&gt;` @&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (int &lt;span class=&quot;hljs-built_in&quot;&gt;i&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-built_in&quot;&gt;i&lt;/span&gt; &amp;lt;= &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;; &lt;span class=&quot;hljs-built_in&quot;&gt;i&lt;/span&gt;++) &lt;span class=&quot;hljs-cell&quot;&gt;{ 
    &amp;lt;span&amp;gt;第 @i 行&amp;lt;br /&amp;gt;&amp;lt;/span&amp;gt;
 }&lt;/span&gt;`&lt;/pre&gt;

或

&lt;pre class=&quot;prettyprint&quot;&gt;` @&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (int &lt;span class=&quot;hljs-built_in&quot;&gt;i&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-built_in&quot;&gt;i&lt;/span&gt; &amp;lt;= &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;; &lt;span class=&quot;hljs-built_in&quot;&gt;i&lt;/span&gt;++) &lt;span class=&quot;hljs-cell&quot;&gt;{ 
    &amp;lt;span&amp;gt;第@(i)行&amp;lt;br /&amp;gt;&amp;lt;/span&amp;gt;
 }&lt;/span&gt;`&lt;/pre&gt;

### 代码与纯文本混合

&lt;pre class=&quot;prettyprint&quot;&gt;` &amp;lt;p&amp;gt;第一种方式&amp;lt;/p&amp;gt;
 @&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-constant&quot;&gt;true&lt;/span&gt;) { 
    &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;text&lt;/span&gt;&amp;gt;这里是&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;语句内部-&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&amp;lt;/&lt;span class=&quot;hljs-keyword&quot;&gt;text&lt;/span&gt;&amp;gt;
 }`&lt;/pre&gt;

上面是Razor的内置标签，映射到浏览器就是纯文本显示没有任何的标记。

&lt;pre class=&quot;prettyprint&quot;&gt;` &amp;lt;p&amp;gt;第二种方式&amp;lt;/p&amp;gt;
 @&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;) { 
    @:这里是&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;语句内部-&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;
 }`&lt;/pre&gt;

上面的@: 后面显示的就是文本

### 表达式与文本混合

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;表达式与文本混合&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;
 Hello @strHello .当前时间： @now`&lt;/pre&gt;

确保 @前要是空字符

### Email地址

&lt;pre class=&quot;prettyprint&quot;&gt;` &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;Email地址&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;
 abc@qq.com`&lt;/pre&gt;

### 输出 @符号

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;@@&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;b&lt;/span&gt;&amp;gt;&lt;/span&gt;`&lt;/pre&gt;

### 注释

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;h2&lt;/span&gt;&amp;gt;&lt;/span&gt;RazorTest&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;h2&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- 这里是HTML注释 --&amp;gt;&lt;/span&gt;
@*
这里是Razor注释

*@`&lt;/pre&gt;

### 内容混合代码

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;内容中混合代码&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;
 @for (int i = 0; i &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-attribute&quot;&gt;10&lt;/span&gt;; &lt;span class=&quot;hljs-attribute&quot;&gt;i&lt;/span&gt;++) { 
    &amp;lt;&lt;span class=&quot;hljs-attribute&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;
        当前循环到第@(i+1)次
        @if (i == 2) { 
            @:输出文本2
        }
        else if (i == 3) { 
            @:输出文本3
        }
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;
 }
 &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;

        &lt;div&gt;
            作者：xundh 发表于2017/4/26 22:19:29 [原文链接](http://blog.csdn.net/xundh/article/details/70833197)
        &lt;/div&gt;
        &lt;div&gt;
        阅读：43 评论：0 [查看评论](http://blog.csdn.net/xundh/article/details/70833197#comments)
        &lt;/div&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xiexiexin.github.io/2017/04/26/原-ASP-NET-MVC-Razor语法/" data-id="cj2d8n62l00044cm4fpljnpui" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-原-Ionic-打开设置界面插件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/26/原-Ionic-打开设置界面插件/" class="article-date">
  <time datetime="2017-04-26T02:42:48.000Z" itemprop="datePublished">2017-04-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/26/原-Ionic-打开设置界面插件/">[原]Ionic 打开设置界面插件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>URL： </p>
<p><a href="https://github.com/guyromb/Cordova-open-native-settings" target="_blank" rel="external">https://github.com/guyromb/Cordova-open-native-settings</a></p>
<p>安装/删除插件：</p>
<pre><code>cordova plugin (&lt;span class=&quot;hljs-built_in&quot;&gt;add&lt;/span&gt;|rm) &lt;span class=&quot;hljs-keyword&quot;&gt;https&lt;/span&gt;://github.com/guyromb/Cordova-&lt;span class=&quot;hljs-built_in&quot;&gt;open&lt;/span&gt;-native-settings.git &lt;span class=&quot;hljs-comment&quot;&gt;--save&lt;/span&gt;`&lt;/pre&gt;

使用插件(Android/IOS)

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;window&lt;/span&gt;.cordova &amp;amp;&amp;amp; &lt;span class=&quot;hljs-built_in&quot;&gt;window&lt;/span&gt;.cordova.plugins.settings) {
    &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;&apos;openNativeSettingsTest is active&apos;&lt;/span&gt;);
    &lt;span class=&quot;hljs-built_in&quot;&gt;window&lt;/span&gt;.cordova.plugins.settings.open(&lt;span class=&quot;hljs-string&quot;&gt;&quot;wifi&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-reserved&quot;&gt;function&lt;/span&gt;() {
            &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;&apos;opened settings&apos;&lt;/span&gt;);
        },
        &lt;span class=&quot;hljs-reserved&quot;&gt;function&lt;/span&gt; () {
            &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;&apos;failed to open settings&apos;&lt;/span&gt;);
        }
    );
} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {
    &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;&apos;openNativeSettingsTest is not active!&apos;&lt;/span&gt;);
}`&lt;/pre&gt;

在安卓系统，打开的设置界面默认是在同一个app里打开一个新的activity，点硬件的后退按钮，会返回之前的activity。如果要以新的application的形式打开设置（它们明显的区别是在最近打开的程序列表里能看到是两个appcation），可以这样使用：

&lt;pre class=&quot;prettyprint&quot;&gt;`window.cordova.plugins.settings.open([&lt;span class=&quot;hljs-string&quot;&gt;&quot;wifi&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;], &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {&lt;/span&gt;}, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {&lt;/span&gt;}); ....`&lt;/pre&gt;

Settings参数列表：

&lt;pre class=&quot;prettyprint&quot;&gt;` &lt;span class=&quot;hljs-string&quot;&gt;&quot;about&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;accessibility&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;account&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;airplane_mode&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;apn&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;application_details&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;application_development&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;application&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;autolock&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;bluetooth&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;castle&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;captioning&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;cast&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;cellular_usage&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;configuration_list&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;data_roaming&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;date&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;display&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;dream&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;facetime&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;home&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;keyboard&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;keyboard_subtype&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;locale&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;location&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;manage_all_applications&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;manage_applications&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;memory_card&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;music&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;music_equalizer&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;music_volume&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;network&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;nike_ipod&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;nfcsharing&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;nfc_payment&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;nfc_settings&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;notes&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;notification_id&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;passbook&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;phone&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;photos&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;print&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;privacy&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;quick_launch&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;reset&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;ringtone&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;browser&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;search&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;security&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;settings&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;show_regulatory_info&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;sound&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;software_update&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;storage&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;store&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;sync&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;tethering&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;twitter&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;usage&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;user_dictionary&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;video&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;voice_input&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;vpn&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;wallpaper&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;wifi_ip&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;wifi&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// ios, android&lt;/span&gt;
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;wireless&quot;&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// android&lt;/span&gt;`&lt;/pre&gt;

使用

&lt;pre class=&quot;prettyprint&quot;&gt;`cordova&lt;span class=&quot;hljs-preprocessor&quot;&gt;.plugins&lt;/span&gt;&lt;span class=&quot;hljs-preprocessor&quot;&gt;.settings&lt;/span&gt;&lt;span class=&quot;hljs-preprocessor&quot;&gt;.openSetting&lt;/span&gt;(settingName, success_callback, failure_callback)&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;`&lt;/pre&gt;

安卓使用示例：

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; cordova.plugins.settings.openSetting != &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;){
    cordova.plugins.settings.openSetting(&lt;span class=&quot;hljs-string&quot;&gt;&quot;nfc_settings&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;{&lt;/span&gt;
            console.log(&lt;span class=&quot;hljs-string&quot;&gt;&quot;opened nfc settings&quot;&lt;/span&gt;)
        },
        &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;{&lt;/span&gt;
            console.log(&lt;span class=&quot;hljs-string&quot;&gt;&quot;failed to open nfc settings&quot;&lt;/span&gt;)
        });
}

        &lt;div&gt;
            作者：xundh 发表于2017/4/26 10:42:48 [原文链接](http://blog.csdn.net/xundh/article/details/70788227)
        &lt;/div&gt;
        &lt;div&gt;
        阅读：28 评论：0 [查看评论](http://blog.csdn.net/xundh/article/details/70788227#comments)
        &lt;/div&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xiexiexin.github.io/2017/04/26/原-Ionic-打开设置界面插件/" data-id="cj2d8n647000e4cm4b34nlfqs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/05/06/First-Article/">First Article</a>
          </li>
        
          <li>
            <a href="/2017/05/06/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2017/05/03/原-Hadoop-学习笔记十-HA高可用设置/">[原]Hadoop 学习笔记十 HA高可用设置</a>
          </li>
        
          <li>
            <a href="/2017/05/03/原-Hadoop-学习笔记九-任务远程提交-Java远程提交/">[原]Hadoop 学习笔记九 任务远程提交--Java远程提交</a>
          </li>
        
          <li>
            <a href="/2017/05/02/原-Hadoop-学习笔记八-任务远程提交-Eclipse插件/">[原]Hadoop 学习笔记八 任务远程提交--Eclipse插件</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 谢厂节(Cade)<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>