<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>[原]大数据学习——HBase  入门 | 谢厂节的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="HBase 学习环境shiyanlou 《HBase介绍、安装与应用案例》   CentOS6.6 64位   JDK 1.7.0_55 64位   Hadoop 1.1.2   Hbase 介绍HBase ——Hadoop Database，是一个高可靠、高性能、面向列、可伸缩的分布式存储系统，利用HBase技术可在廉价PC Server上搭建起大规模结构化存储集群。 HBase是Google">
<meta property="og:type" content="article">
<meta property="og:title" content="[原]大数据学习——HBase  入门">
<meta property="og:url" content="https://xiexiexin.github.io/2017/04/19/原-大数据学习——HBase-入门/index.html">
<meta property="og:site_name" content="谢厂节的博客">
<meta property="og:description" content="HBase 学习环境shiyanlou 《HBase介绍、安装与应用案例》   CentOS6.6 64位   JDK 1.7.0_55 64位   Hadoop 1.1.2   Hbase 介绍HBase ——Hadoop Database，是一个高可靠、高性能、面向列、可伸缩的分布式存储系统，利用HBase技术可在廉价PC Server上搭建起大规模结构化存储集群。 HBase是Google">
<meta property="og:image" content="http://img.blog.csdn.net/20170419210215323?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170419210806719?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170419211027283?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170419211506106?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170419211550473?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170419211738891?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170419211847205?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170419211947050?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170419212052020?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170419212134084?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:updated_time" content="2017-05-06T12:11:32.416Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[原]大数据学习——HBase  入门">
<meta name="twitter:description" content="HBase 学习环境shiyanlou 《HBase介绍、安装与应用案例》   CentOS6.6 64位   JDK 1.7.0_55 64位   Hadoop 1.1.2   Hbase 介绍HBase ——Hadoop Database，是一个高可靠、高性能、面向列、可伸缩的分布式存储系统，利用HBase技术可在廉价PC Server上搭建起大规模结构化存储集群。 HBase是Google">
<meta name="twitter:image" content="http://img.blog.csdn.net/20170419210215323?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
  
    <link rel="alternate" href="/atom.xml" title="谢厂节的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">谢厂节的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">技术小栈</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://xiexiexin.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-原-大数据学习——HBase-入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/19/原-大数据学习——HBase-入门/" class="article-date">
  <time datetime="2017-04-19T14:16:35.000Z" itemprop="datePublished">2017-04-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      [原]大数据学习——HBase  入门
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="HBase"><a href="#HBase" class="headerlink" title="HBase"></a>HBase</h1><hr>
<h2 id="学习环境"><a href="#学习环境" class="headerlink" title="学习环境"></a>学习环境</h2><p><em>shiyanlou</em> 《HBase介绍、安装与应用案例》 </p>
<ul>
<li><p>CentOS6.6 64位 </p>
</li>
<li><p>JDK 1.7.0_55 64位 </p>
</li>
<li><p>Hadoop 1.1.2</p>
</li>
</ul>
<h2 id="Hbase-介绍"><a href="#Hbase-介绍" class="headerlink" title="Hbase 介绍"></a>Hbase 介绍</h2><p>HBase ——Hadoop Database，是一个高可靠、高性能、面向列、可伸缩的分布式存储系统，利用HBase技术可在廉价PC Server上搭建起大规模结构化存储集群。</p>
<p>HBase是Google Bigtable的开源实现，类似Google Bigtable利用GFS作为其文件存储系统，HBase 利用Hadoop HDFS作为其文件存储系统；Google运行MapReduce来处理Bigtable中的海量数据，HBase同样利用Hadoop MapReduce来处理HBase中的海量数据；Google BigTable利用Chubby作为协同服务，HBase使用的是Zookeeper作为对应。</p>
<p><img src="http://img.blog.csdn.net/20170419210215323?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>HBase位于结构化存储层，HDFS为HBase提供了高可靠性的底层存储支持，MapReduce为HBase提供了高性能的计算能力，Zookeeper为HBase提供了稳定服务和failover机制。</p>
<p>此外，Pig和Hive为Hbase提供了高层语言支持，使得在HBase上进行数据统计处理变得简单。 </p>
<p>Sqoop则为HBase提供了方便的RDBMS数据导入功能。</p>
<p><strong>HBase官网：</strong> <a href="http://hbase.apache.org/" target="_blank" rel="external">http://hbase.apache.org/</a></p>
<h2 id="HBase特点"><a href="#HBase特点" class="headerlink" title="HBase特点"></a>HBase特点</h2><ul>
<li>强一致性读写：HBase 不是“eventually consistent（最终一致性）”数据存储。这让它很适合高速计数聚合类任务；</li>
<li>自动分片(Automatic sharding)： HBase 表通过 region 分布在集群中。数据增长时，region 会自动分割并重新分布；</li>
<li>RegionServer 自动故障转移；</li>
<li>Hadoop/HDFS 集成：HBase 支持开箱即用地支持 HDFS 作为它的分布式文件系统；</li>
<li>MapReduce： HBase 通过 MapReduce 支持大并发处理；</li>
<li>Java 客户端 API：HBase 支持易于使用的 Java API 进行编程访问；</li>
<li>Thrift/REST API：HBase 也支持 Thrift 和 REST 作为非 Java 前端的访问；</li>
<li>Block Cache 和 Bloom Filter：对于大容量查询优化， HBase 支持 Block Cache 和 Bloom Filter；</li>
<li>运维管理：HBase 支持 JMX 提供内置网页用于运维。</li>
</ul>
<h2 id="HBase应用场景"><a href="#HBase应用场景" class="headerlink" title="HBase应用场景"></a>HBase应用场景</h2><ul>
<li>足够多数据，上亿或上千亿行数据</li>
<li>不依赖RDBMS的特性，如列类型、第二索引、事务、高级查询等</li>
<li>有足够的硬件，少于5节点Hadoop时，基本体现不出优势</li>
</ul>
<h2 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>列的可以动态增加，并且列为空就不存储数据，节省存储空间</li>
<li>Hbase 自动切分数据，使得数据存储自动具有水平扩展</li>
<li>Hbase 可以提供高并发读写操作的支持</li>
<li>与 Hadoop MapReduce 相结合有利于数据分析</li>
<li>容错性</li>
<li>版权免费</li>
<li>非常灵活的模式设计（或者说没有固定模式的限制）</li>
<li>可以跟 Hive 集成，使用类 SQL 查询</li>
<li>自动故障转移</li>
<li>客户端接口易于使用</li>
<li>行级别原子性，即，PUT 操作一定是完全成功或者完全失败</li>
</ul>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li>不能支持条件查询，只支持按照 row key 来查询</li>
<li>容易产生单点故障（在只使用一个 HMaster 的时候）</li>
<li>不支持事务</li>
<li>JOIN 不是数据库层支持的，而需要用 MapReduce</li>
<li>只能在逐渐上索引和排序</li>
<li>没有内置的身份和权限认证</li>
</ul>
<h2 id="HBase-访问接口"><a href="#HBase-访问接口" class="headerlink" title="HBase 访问接口"></a>HBase 访问接口</h2><ul>
<li>Native Java API</li>
<li>HBase Shell</li>
<li>Thrift Gateway</li>
<li>REST Gateway：支持REST网格的HTTP API访问HBase</li>
<li>Pig：Pig Latin流式编程语言来操作HBase中的数据。</li>
<li>Hive：0.7.0版本的Hive加入HBase</li>
</ul>
<h2 id="HBase-数据模型"><a href="#HBase-数据模型" class="headerlink" title="HBase 数据模型"></a>HBase 数据模型</h2><p><img src="http://img.blog.csdn.net/20170419210806719?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<ul>
<li>Row Key: 行键，Table的主键，Table中的记录按照Row Key排序</li>
<li>Timestamp: 时间戳，每次数据操作对应的时间戳，可以看作是数据的version number</li>
<li>Column Family：列簇，Table在水平方向有一个或者多个Column Family组成，一个Column Family中可以由任意多个Column组成，即Column Family支持动态扩展，无需预先定义Column的数量以及类型，所有Column均以二进制格式存储，用户需要自行进行类型转换。</li>
</ul>
<h3 id="Table-amp-Region"><a href="#Table-amp-Region" class="headerlink" title="Table &amp; Region"></a>Table &amp; Region</h3><p>当Table随着记录数不断增加而变大后，会逐渐分裂成多份splits，成为regions，一个region由[startkey,endkey)表示，不同region会被Master分配给相应的RegionServer进行管理。 </p>
<p><img src="http://img.blog.csdn.net/20170419211027283?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>HBase中有两张特殊的Table， -ROOT- 和 .META. </p>
<ul>
<li><p>.META. ：记录了用户表的Region信息，.META.可以有多个region </p>
</li>
<li><p>-ROOT-：记录了.META.表的Region信息，-ROOT-只有一个region </p>
</li>
<li><p>Zookeeper中记录了-ROOT-表的location </p>
</li>
</ul>
<p>Client访问用户数据之前需要先访问zookeeper，然后访问-ROOT-表，接着访问.META.表，最后才能找到用户数据的位置去访问，中间需要多次网络操作，不过client端会做cache缓存。</p>
<h3 id="MapReduce-on-HBase"><a href="#MapReduce-on-HBase" class="headerlink" title="MapReduce on HBase"></a>MapReduce on HBase</h3><p><img src="http://img.blog.csdn.net/20170419211506106?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="HBase-系统架构"><a href="#HBase-系统架构" class="headerlink" title="HBase 系统架构"></a>HBase 系统架构</h3><p><img src="http://img.blog.csdn.net/20170419211550473?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h3><p>HBase Client使用HBase的RPC机制与HMaster和HRegionServer进行通信，对于管理类操作，Client与HMaster进行RPC；对于数据读写类操作，Client与HRegionServer进行RPC。</p>
<h3 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h3><p>Zookeeper Quorum中除了存储了-ROOT-表的地址和HMaster的地址，HRegionServer也会把自己以Ephemeral方式注册到 Zookeeper中，使得HMaster可以随时感知到各个HRegionServer的健康状态。此外，Zookeeper也避免了HMaster的 单点问题。</p>
<h3 id="HRegionServer"><a href="#HRegionServer" class="headerlink" title="HRegionServer"></a>HRegionServer</h3><p>用户I/O请求，向HDFS文件系统中读写数据，是HBase中最核心的模块。 </p>
<p><img src="http://img.blog.csdn.net/20170419211738891?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>HRegionServer内部管理了一系列HRegion对象，每个HRegion对应了Table中的一个 Region，HRegion中由多个HStore组成。每个HStore对应了Table中的一个Column Family的存储，可以看出每个Column Family其实就是一个集中的存储单元，因此最好将具备共同IO特性的column放在一个Column Family中，这样最高效。</p>
<p>HStore存储是HBase存储的核心了，其中由两部分组成，一部分是MemStore，一部分是StoreFiles。 MemStore是Sorted Memory Buffer，用户写入的数据首先会放入MemStore，当MemStore满了以后会Flush成一个StoreFile（底层实现是HFile）， 当StoreFile文件数量增长到一定阈值，会触发Compact合并操作，将多个StoreFiles合并成一个StoreFile，合并过程中会进 行版本合并和数据删除，因此可以看出HBase其实只有增加数据，所有的更新和删除操作都是在后续的compact过程中进行的，这使得用户的写操作只要 进入内存中就可以立即返回，保证了HBase I/O的高性能。当StoreFiles Compact后，会逐步形成越来越大的StoreFile，当单个StoreFile大小超过一定阈值后，会触发Split操作，同时把当前 Region Split成2个Region，父Region会下线，新Split出的2个孩子Region会被HMaster分配到相应的HRegionServer 上，使得原先1个Region的压力得以分流到2个Region上。下图描述了Compaction和Split的过程： </p>
<p><img src="http://img.blog.csdn.net/20170419211847205?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>在理解了上述HStore的基本原理后，还必须了解一下HLog的功能，因为上述的HStore在系统正常工作的前提下是没有问 题的，但是在分布式系统环境中，无法避免系统出错或者宕机，因此一旦HRegionServer意外退出，MemStore中的内存数据将会丢失，这就需 要引入HLog了。每个HRegionServer中都有一个HLog对象，HLog是一个实现Write Ahead Log的类，在每次用户操作写入MemStore的同时，也会写一份数据到HLog文件中（HLog文件格式见后续），HLog文件定期会滚动出新的，并 删除旧的文件（已持久化到StoreFile中的数据）。当HRegionServer意外终止后，HMaster会通过Zookeeper感知 到，HMaster首先会处理遗留的 HLog文件，将其中不同Region的Log数据进行拆分，分别放到相应region的目录下，然后再将失效的region重新分配，领取 到这些region的HRegionServer在Load Region的过程中，会发现有历史HLog需要处理，因此会Replay HLog中的数据到MemStore中，然后flush到StoreFiles，完成数据恢复。</p>
<h3 id="HBase-存储格式"><a href="#HBase-存储格式" class="headerlink" title="HBase 存储格式"></a>HBase 存储格式</h3><p>HBase中的所有数据文件都存储在Hadoop HDFS文件系统上，主要包括上述提出的两种文件类型：</p>
<p>HFile， HBase中KeyValue数据的存储格式，HFile是Hadoop的二进制格式文件，实际上StoreFile就是对HFile做了轻量级包装，即StoreFile底层就是HFile </p>
<p>HLog File，HBase中WAL（Write Ahead Log） 的存储格式，物理上是Hadoop的Sequence File</p>
<h4 id="HFile-格式"><a href="#HFile-格式" class="headerlink" title="HFile 格式"></a>HFile 格式</h4><p><img src="http://img.blog.csdn.net/20170419211947050?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>首先HFile文件是不定长的，长度固定的只有其中的两块：Trailer和FileInfo。正如图中所示的，Trailer 中有指针指向其他数据块的起始点。File Info中记录了文件的一些Meta信息，例如：AVG_KEY_LEN, AVG_VALUE_LEN, LAST_KEY, COMPARATOR, MAX_SEQ_ID_KEY等。Data Index和Meta Index块记录了每个Data块和Meta块的起始点。 </p>
<p>Data Block是HBase I/O的基本单元，为了提高效率，HRegionServer中有基于LRU的Block Cache机制。每个Data块的大小可以在创建一个Table的时候通过参数指定，大号的Block有利于顺序Scan，小号Block利于随机查询。 每个Data块除了开头的Magic以外就是一个个KeyValue对拼接而成, Magic内容就是一些随机数字，目的是防止数据损坏。后面会详细介绍每个KeyValue对的内部构造。 </p>
<p>HFile里面的每个KeyValue对就是一个简单的byte数组。但是这个byte数组里面包含了很多项，并且有固定的结构。我们来看看里面的具体结构：</p>
<p><img src="http://img.blog.csdn.net/20170419212052020?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>开始是两个固定长度的数值，分别表示Key的长度和Value的长度。紧接着是Key，开始是固定长度的数值，表示RowKey 的长度，紧接着是RowKey，然后是固定长度的数值，表示Family的长度，然后是Family，接着是Qualifier，然后是两个固定长度的数 值，表示Time Stamp和Key Type（Put/Delete）。Value部分没有这么复杂的结构，就是纯粹的二进制数据了。</p>
<h3 id="HLogFile"><a href="#HLogFile" class="headerlink" title="HLogFile"></a>HLogFile</h3><p><img src="http://img.blog.csdn.net/20170419212134084?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVuZGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"> </p>
<p>上图中示意了HLog文件的结构，其实HLog文件就是一个普通的Hadoop Sequence File，Sequence File 的Key是HLogKey对象，HLogKey中记录了写入数据的归属信息，除了table和region名字外，同时还包括 sequence number和timestamp，timestamp是“写入时间”，sequence number的起始值为0，或者是最近一次存入文件系统中sequence number。</p>
<p>HLog Sequece File的Value是HBase的KeyValue对象，即对应HFile中的KeyValue，可参见上文描述。</p>
<h2 id="Hadoop与HBase版本对应关系"><a href="#Hadoop与HBase版本对应关系" class="headerlink" title="Hadoop与HBase版本对应关系"></a>Hadoop与HBase版本对应关系</h2><p>版本</p>
<table><br><thead><br><tr><br>  <th>HBase-0.94.x</th><br>  <th>HBase-0.98.x</th><br>  <th>HBase-1.0.x</th><br>  <th>HBase-1.1.x</th><br>  <th>HBase-1.2.x</th><br>  <th>Hadoop-1.0.x</th><br></tr><br></thead><br><tbody><tr><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br>  <td></td><br></tr><br><tr><br>  <td>Hadoop-1.1.x</td><br>  <td>S</td><br>  <td>NT</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br></tr><br><tr><br>  <td>Hadoop-0.23.x</td><br>  <td>S</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br></tr><br><tr><br>  <td>Hadoop-2.0.x-alpha</td><br>  <td>NT</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br></tr><br><tr><br>  <td>Hadoop-2.1.0-beta</td><br>  <td>NT</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br></tr><br><tr><br>  <td>Hadoop-2.2.0</td><br>  <td>NT</td><br>  <td>S</td><br>  <td>NT</td><br>  <td>NT</td><br>  <td>X</td><br></tr><br><tr><br>  <td>Hadoop-2.3.x</td><br>  <td>NT</td><br>  <td>S</td><br>  <td>NT</td><br>  <td>NT</td><br>  <td>X</td><br></tr><br><tr><br>  <td>Hadoop-2.4.x</td><br>  <td>NT</td><br>  <td>S</td><br>  <td>S</td><br>  <td>S</td><br>  <td>S</td><br></tr><br><tr><br>  <td>Hadoop-2.5.x</td><br>  <td>NT</td><br>  <td>S</td><br>  <td>S</td><br>  <td>S</td><br>  <td>S</td><br></tr><br><tr><br>  <td>Hadoop-2.6.0</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br></tr><br><tr><br>  <td>Hadoop-2.6.1+</td><br>  <td>NT</td><br>  <td>NT</td><br>  <td>NT</td><br>  <td>NT</td><br>  <td>S</td><br></tr><br><tr><br>  <td>Hadoop-2.7.0</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br>  <td>X</td><br></tr><br><tr><br>  <td>Hadoop-2.7.1+</td><br>  <td>NT</td><br>  <td>NT</td><br>  <td>NT</td><br>  <td>NT</td><br>  <td>S</td><br></tr><br></tbody></table>

<ul>
<li>S = supported and tested,支持</li>
<li>X = not supported,不支持</li>
<li>NT = not tested enough.可以运行但测试不充分</li>
</ul>
<h2 id="Hadoop和JDK版本对应关系"><a href="#Hadoop和JDK版本对应关系" class="headerlink" title="Hadoop和JDK版本对应关系"></a>Hadoop和JDK版本对应关系</h2><table><br><thead><br><tr><br>  <th>Hbase版本</th><br>  <th>JDK 6</th><br>  <th>JDK 7</th><br>  <th>JDK 8</th><br></tr><br></thead><br><tbody><tr><br>  <td>1.2</td><br>  <td>Not Supported</td><br>  <td>yes</td><br>  <td>yes</td><br></tr><br><tr><br>  <td>1.1</td><br>  <td>Not Supported</td><br>  <td>yes</td><br>  <td>Not Supported</td><br></tr><br><tr><br>  <td>1</td><br>  <td>Not Supported</td><br>  <td>yes</td><br>  <td>Not Supported</td><br></tr><br><tr><br>  <td>0.98</td><br>  <td>yes</td><br>  <td>yes</td><br>  <td>Not Supported</td><br></tr><br><tr><br>  <td>0.94</td><br>  <td>yes</td><br>  <td>yes</td><br>  <td>N/A</td><br></tr><br></tbody></table>

<h2 id="数据模型操作"><a href="#数据模型操作" class="headerlink" title="数据模型操作"></a>数据模型操作</h2><pre><code>&lt;span class=&quot;hljs-keyword&quot;&gt;Get&lt;/span&gt;、&lt;span class=&quot;hljs-keyword&quot;&gt;Put&lt;/span&gt;、&lt;span class=&quot;hljs-keyword&quot;&gt;Scan&lt;/span&gt; 和 &lt;span class=&quot;hljs-keyword&quot;&gt;Delete&lt;/span&gt;`&lt;/pre&gt;

## 安装部署HBase

&lt;pre class=&quot;prettyprint&quot;&gt;`cd /home/shiyanlou/install&lt;span class=&quot;hljs-attribute&quot;&gt;-pack&lt;/span&gt;
tar &lt;span class=&quot;hljs-attribute&quot;&gt;-zxf&lt;/span&gt; hbase&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.96&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;hljs-attribute&quot;&gt;-hadoop1&lt;/span&gt;&lt;span class=&quot;hljs-attribute&quot;&gt;-bin&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;.&lt;/span&gt;tar&lt;span class=&quot;hljs-built_in&quot;&gt;.&lt;/span&gt;gz
mv hbase&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.96&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;hljs-attribute&quot;&gt;-hadoop1&lt;/span&gt; /app/hbase&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.96&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;/span&gt;
sudo vi /etc/profile`&lt;/pre&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; HBASE_HOME=/app/hbase-&lt;span class=&quot;hljs-number&quot;&gt;0.96&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; PATH=&lt;span class=&quot;hljs-variable&quot;&gt;$PATH&lt;/span&gt;:&lt;span class=&quot;hljs-variable&quot;&gt;$HBASE_HOME&lt;/span&gt;/bin
`&lt;/pre&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-built_in&quot;&gt;source&lt;/span&gt; /etc/profile
hbase version
&lt;span class=&quot;hljs-built_in&quot;&gt;cd&lt;/span&gt; /app/hbase-&lt;span class=&quot;hljs-number&quot;&gt;0.96&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;/conf
&lt;span class=&quot;hljs-built_in&quot;&gt;sudo&lt;/span&gt; vi hbase-env.sh`&lt;/pre&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; JAVA_HOME=/app/lib/jdk1.&lt;span class=&quot;hljs-number&quot;&gt;7.0&lt;/span&gt;_55
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; HBASE_CLASSPATH=/app/hadoop-&lt;span class=&quot;hljs-number&quot;&gt;1.1&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;/conf
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; HBASE_MANAGES_ZK=&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;

`&lt;/pre&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-built_in&quot;&gt;cd&lt;/span&gt; /app/hbase-&lt;span class=&quot;hljs-number&quot;&gt;0.96&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;/conf
&lt;span class=&quot;hljs-built_in&quot;&gt;sudo&lt;/span&gt; vi hbase-site.xml`&lt;/pre&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;`&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.rootdir&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;hdfs://hadoop:9000/hbase&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.cluster.distributed&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.zookeeper.quorum&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;bb5264235bb1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-title&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;`&lt;/pre&gt;

## 启动并验证

&lt;pre class=&quot;prettyprint&quot;&gt;`cd /app/hadoop-1.1.2/bin
./&lt;span class=&quot;hljs-operator&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;start&lt;/span&gt;-&lt;span class=&quot;hljs-keyword&quot;&gt;all&lt;/span&gt;.sh
cd /app/hbase-&lt;span class=&quot;hljs-number&quot;&gt;0.96&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;/span&gt;/bin
./&lt;span class=&quot;hljs-keyword&quot;&gt;start&lt;/span&gt;-hbase.sh
hbase shell&lt;/span&gt;`&lt;/pre&gt;

创建表

&lt;pre class=&quot;prettyprint&quot;&gt;`hbase&amp;gt; create &lt;span class=&quot;hljs-string&quot;&gt;&apos;member&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;m_id&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;address&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;info&apos;&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;list&lt;/span&gt;`&lt;/pre&gt;

### 示例

学生成绩表：

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
  &lt;th&gt;name&lt;/th&gt;
  &lt;th&gt;grad&lt;/th&gt;
  &lt;th&gt;course:math&lt;/th&gt;
  &lt;th&gt;course:art&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
  &lt;td&gt;Tom&lt;/td&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;87&lt;/td&gt;
  &lt;td&gt;97&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;Jerry&lt;/td&gt;
  &lt;td&gt;2&lt;/td&gt;
  &lt;td&gt;100&lt;/td&gt;
  &lt;td&gt;80&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

这里grad对于表来说是一列，course对于表来说是一个列族，这个列族由两个列组成：math和art。

&lt;pre class=&quot;prettyprint&quot;&gt;`hbase&amp;gt; &lt;span class=&quot;hljs-built_in&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;scores&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;grade&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;course&apos;&lt;/span&gt;
hbase&amp;gt; describe &lt;span class=&quot;hljs-string&quot;&gt;&apos;scores&apos;&lt;/span&gt;`&lt;/pre&gt;

新建Tom行

&lt;pre class=&quot;prettyprint&quot;&gt;`hbase&amp;gt; &lt;span class=&quot;hljs-built_in&quot;&gt;put&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;scores&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;Tome&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;grade:&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;1&apos;&lt;/span&gt;
hbase&amp;gt; &lt;span class=&quot;hljs-built_in&quot;&gt;put&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;scores&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;Tome&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;course:math&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;87&apos;&lt;/span&gt;
hbase&amp;gt; &lt;span class=&quot;hljs-built_in&quot;&gt;put&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;scores&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;Tome&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;course:art&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;97&apos;&lt;/span&gt;`&lt;/pre&gt;

新建 Jerry行

&lt;pre class=&quot;prettyprint&quot;&gt;`hbase&amp;gt; &lt;span class=&quot;hljs-built_in&quot;&gt;put&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;scores&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;Jerry&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;grade:&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;2&apos;&lt;/span&gt;
hbase&amp;gt; &lt;span class=&quot;hljs-built_in&quot;&gt;put&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;scores&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;Jerry&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;course:math&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;100&apos;&lt;/span&gt;
hbase&amp;gt; &lt;span class=&quot;hljs-built_in&quot;&gt;put&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;scores&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;Jerry&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;course:art&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;80&apos;&lt;/span&gt;`&lt;/pre&gt;

查看表

&lt;pre class=&quot;prettyprint&quot;&gt;`hbase&amp;gt; &lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;scores&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;Tom&apos;&lt;/span&gt;`&lt;/pre&gt;

查看scores表所有数据

&lt;pre class=&quot;prettyprint&quot;&gt;`hbase&amp;gt; scan &lt;span class=&quot;hljs-string&quot;&gt;&apos;scores&apos;&lt;/span&gt;
</code></pre><p>文章内容主要来源： </p>
<ul>
<li><p>实验楼 </p>
</li>
<li><p><a href="http://www.thebigdata.cn/QiTa/14677.html" target="_blank" rel="external">http://www.thebigdata.cn/QiTa/14677.html</a></p>
<pre><code>&lt;div&gt;
    作者：xundh 发表于2017/4/19 22:16:35 [原文链接](http://blog.csdn.net/xundh/article/details/70245956)
&lt;/div&gt;
&lt;div&gt;
阅读：107 评论：0 [查看评论](http://blog.csdn.net/xundh/article/details/70245956#comments)
&lt;/div&gt;
</code></pre></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xiexiexin.github.io/2017/04/19/原-大数据学习——HBase-入门/" data-id="cj2d8br20000g70m4v222w1p8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/04/20/原-大数据学习——Flume介绍与安装/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          [原]大数据学习——Flume介绍与安装
        
      </div>
    </a>
  
  
    <a href="/2017/04/19/原-大数据学习——Mahout入门/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">[原]大数据学习——Mahout入门</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/05/06/First-Article/">First Article</a>
          </li>
        
          <li>
            <a href="/2017/05/06/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2017/05/03/原-Hadoop-学习笔记十-HA高可用设置/">[原]Hadoop 学习笔记十 HA高可用设置</a>
          </li>
        
          <li>
            <a href="/2017/05/03/原-Hadoop-学习笔记九-任务远程提交-Java远程提交/">[原]Hadoop 学习笔记九 任务远程提交--Java远程提交</a>
          </li>
        
          <li>
            <a href="/2017/05/02/原-Hadoop-学习笔记八-任务远程提交-Eclipse插件/">[原]Hadoop 学习笔记八 任务远程提交--Eclipse插件</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 谢厂节(Cade)<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>